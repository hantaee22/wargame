<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}MemoVault{% endblock %}</title>
    <style>
      :root { --fg:#111; --muted:#666; --line:#eee; --primary:#0a66c2; }
      * { box-sizing: border-box; }
      body { font-family: system-ui,-apple-system,Segoe UI,Roboto,sans-serif; color:var(--fg); margin:0; }
      a { color: var(--primary); text-decoration: none; }
      header.site { border-bottom:1px solid var(--line); }
      .wrap { max-width: 900px; margin: 0 auto; padding: 1rem; }
      .nav { display:flex; gap:1rem; align-items:center; }
      .nav .spacer { flex:1; }
      .btn { display:inline-block; padding:.45rem .7rem; border:1px solid var(--line); border-radius:.5rem; background:#fff; }
      .btn.primary { background: var(--primary); color:#fff; border-color: var(--primary); }
      .muted { color: var(--muted); }
      .flash { margin: .75rem 0; padding: .6rem .8rem; border:1px solid var(--line); border-radius:.5rem; background:#f8fafc; }
      footer.site { margin-top:3rem; border-top:1px solid var(--line); color:var(--muted); }
      pre { background:#f6f8fa; padding:1rem; overflow:auto; }
      code { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }
    </style>
    {% block head %}{% endblock %}
  </head>
  <body>
    <header class="site">
      <div class="wrap nav">
        <a href="/" class="logo" style="font-weight:700">MemoVault</a>
        {% if session and session.get('uid') %}
          <a href="/notes">Notes</a>
          <span class="spacer"></span>
          <a href="/profile">Profile</a>
          <form method="post" action="/logout" style="margin:0">
            <button class="btn" type="submit">Logout</button>
          </form>
        {% else %}
          <span class="spacer"></span>
          <a class="btn" href="/login">Login</a>
        {% endif %}
      </div>
    </header>

    <main class="wrap">
      {% with messages = get_flashed_messages() %}
        {% if messages %}
          {% for m in messages %}
            <div class="flash">{{ m }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      {% block content %}{% endblock %}
    </main>
    {# Important: Do not target this real server with attacks. #}
    <footer class="site">
      <div class="wrap">
        <small>© {{ (now or '') or '' }} MemoVault Inc. • Terms · Privacy</small>
      </div>
    </footer>
  </body>
</html>
